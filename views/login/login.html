<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8"/>
    <script type="text/javascript" src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.0.js" charset="utf-8"></script>
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <title>ë„¤ì¼ ì˜¬ë˜?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="stylesheets/main.css" />
    <link rel="shortcut icon" href="images/nailollae.png"/>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
   <!-- menu ë¶ˆëŸ¬ì˜¤ê¸°-->
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#menu").load("/common/menu");
        })
    </script>
</head>
<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">

    <!-- Main -->
    <div id="main">
        <div class="inner">

            <!-- Header -->
            <header id="header">
                <a href="/" class="logo"><strong>Nail</strong> Ollae?</a>
                <ul class="icons">
                    <li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
                </ul>
            </header>

            <!-- Content -->
            <section>
                <header class="main">
                    <h1>Login</h1>
                </header>

                <!-- Content -->
                <h2 id="content">ë¡œê·¸ì¸</h2>
                <p><b>ë„¤ì¼ ì˜¬ë˜?</b>ë¥¼ ë°©ë¬¸í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.<br/>
                    ë¡œê·¸ì¸ í›„ ì„œë¹„ìŠ¤ë¥¼ ì˜ˆì•½í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!ğŸŒ¹</p>

               <hr class="major" />

                    <!-- ë„¤ì´ë²„ ì•„ì´ë””ë¡œ ë¡œê·¸ì¸ ë²„íŠ¼ ë…¸ì¶œ ì˜ì—­ -->
                    <div id="naverIdLogin"></div>
                    <!-- ë„¤ì´ë²„ ì•„ì´ë”” ë¡œê·¸ì¸ ì´ˆê¸°í™” Script -->
                    <script type="text/javascript">
                        let naverLogin = new naver.LoginWithNaverId(
                            {
                                clientId: "oqDVdjHj1B7jbQzCO3pb",
                                callbackUrl: "http://nail-ollae.com/Api/Member/Oauth2C",
                                isPopup: false, /* íŒì—…ì„ í†µí•œ ì—°ë™ì²˜ë¦¬ ì—¬ë¶€ */
                                loginButton: {color: "green", type: 3, height: 40} /* ë¡œê·¸ì¸ ë²„íŠ¼ì˜ íƒ€ì…ì„ ì§€ì • */
                            }
                        );

                        /* ì„¤ì •ì •ë³´ë¥¼ ì´ˆê¸°í™”í•˜ê³  ì—°ë™ì„ ì¤€ë¹„ */
                        naverLogin.init();

                        /* (4) Callbackì˜ ì²˜ë¦¬. ì •ìƒì ìœ¼ë¡œ Callback ì²˜ë¦¬ê°€ ì™„ë£Œë  ê²½ìš° main pageë¡œ redirect(ë˜ëŠ” Popup close) */
                        window.addEventListener('load', function () {
                            naverLogin.getLoginStatus(function (status) {
                                if (status) {
                                    /* (5) í•„ìˆ˜ì ìœ¼ë¡œ ë°›ì•„ì•¼í•˜ëŠ” í”„ë¡œí•„ ì •ë³´ê°€ ìˆë‹¤ë©´ callbackì²˜ë¦¬ ì‹œì ì— ì²´í¬ */
                                    var email = naverLogin.user.getEmail();
                                    if( email === undefined || email === null) {
                                        alert("ì´ë©”ì¼ì€ í•„ìˆ˜ì •ë³´ì…ë‹ˆë‹¤. ì •ë³´ì œê³µì„ ë™ì˜í•´ì£¼ì„¸ìš”.");
                                        /* (5-1) ì‚¬ìš©ì ì •ë³´ ì¬ë™ì˜ë¥¼ ìœ„í•˜ì—¬ ë‹¤ì‹œ ë„¤ì•„ë¡œ ë™ì˜í˜ì´ì§€ë¡œ ì´ë™í•¨ */
                                        naverLogin.reprompt();
                                        return;
                                    }
                                    window.location.replace("http://" + window.location.hostname + ( (location.port===""||location.port===undefined)?"":":" + location.port) + "/index.html");
                                } else {
                                    console.log("callback ì²˜ë¦¬ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.");
                                }
                            });
                        });
                    </script>

                    <!-- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë²„íŠ¼ ë…¸ì¶œ ì˜ì—­ -->
                    <script>
                        // SDKë¥¼ ì´ˆê¸°í™” í•©ë‹ˆë‹¤. ì‚¬ìš©í•  ì•±ì˜ JavaScript í‚¤ë¥¼ ì„¤ì •í•´ ì£¼ì„¸ìš”.
                        Kakao.init('e63f92e9650fbfc759e3de907dd92945');

                        // SDK ì´ˆê¸°í™” ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤.
                        console.log(Kakao.isInitialized());
                    </script>
                    <a id="custom-login-btn" href="javascript:loginWithKakao()">
                        <img
                                src="//k.kakaocdn.net/14/dn/btqCn0WEmI3/nijroPfbpCa4at5EIsjyf0/o.jpg"
                                width="180"
                        />
                    </a>
                    <p id="token-result"></p>
                    <script type="text/javascript">
                        function loginWithKakao() {
                            Kakao.Auth.authorize({
                                redirectUri: 'http://localhost:3000'
                            })
                        }
                        // ì•„ë˜ëŠ” ë°ëª¨ë¥¼ ìœ„í•œ UI ì½”ë“œì…ë‹ˆë‹¤.
                        displayToken()
                        function displayToken() {
                            const token = getCookie('dShsu3empcfDpP7u4ENBXbS6rCzos6dGvJxROwo9dJkAAAF3pMNrsQ')
                            if(token) {
                                Kakao.Auth.setAccessToken(token)
                                Kakao.Auth.getStatusInfo(({ status }) => {
                                    if(status === 'connected') {
                                        document.getElementById('token-result').innerText = 'login success. token: ' + Kakao.Auth.getAccessToken()
                                    } else {
                                        Kakao.Auth.setAccessToken(null)
                                    }
                                })
                            }
                        }
                        function getCookie(name) {
                            const value = "; " + document.cookie;
                            const parts = value.split("; " + name + "=");
                            if (parts.length === 2) return parts.pop().split(";").shift();
                        }
                    </script>
            </section>
        </div>
    </div>

    <!-- Menu -->
    <div id="menu"></div>

</div>

<!-- Scripts -->
<script src="javascripts/jquery.min.js"></script>
<script src="javascripts/browser.min.js"></script>
<script src="javascripts/breakpoints.min.js"></script>
<script src="javascripts/util.js"></script>
<script src="javascripts/main.js"></script>

</body>
</html>