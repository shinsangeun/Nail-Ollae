<!DOCTYPE HTML>
<html>
<head>
    <title>ë„¤ì¼ ì˜¬ë˜?</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="stylesheets/main.css" />
    <link rel="shortcut icon" href="images/nailollae.png"/>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <!--menu ë¶ˆëŸ¬ì˜¤ê¸°-->
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#menu").load("/common/menu");
        })

        $(document).ready(function () {
            $("#commonHeader").load("/common/header");
        })

        // ì ë¦½ê¸ˆ í˜„í™©
        $(document).ready(() => {
            $.ajax({
                url: "http://localhost:3000/mypage/balance",
                method: "GET",
                success: (response) => {
                    console.log("res:", response.data);
                    if(response.data.length > 0){
                        for(let index=0; index < response.data.length; index++){
                            let newRow = $("<tr onclick=test()>");
                            let cols = "";
                            cols += '<td>' + response.data[index].id + '</td>';
                            cols += '<td>' + response.data[index].category + '</td>';
                            cols += '<td>' + response.data[index].reserveDate.split('T')[0] + '</td>';
                            cols += '<td>' + response.data[index].amount + '</td>';
                            cols += '<td>' + response.data[index].balance + '</td>';
                            newRow.append(cols);
                            $("#balanceList .balanceData").append(newRow);
                        }
                    }else if(response.data.length === 0){
                        let newRow = $("<tr onclick=test(1)>");
                        let cols = "";
                        cols += '<td> </td>';
                        cols += '<td> </td>';
                        cols += '<td>ì ë¦½ê¸ˆ ì‚¬ìš© ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td>';
                        cols += '<td> </td>';
                        cols += '<td> </td>';
                        newRow.append(cols);
                        $("#balanceList .balanceData").append(newRow);
                    }
                }
            })
        })

        // ì ë¦½ê¸ˆ í˜„í™©
        $(document).ready(() => {
            $.ajax({
                url: "http://localhost:3000/mypage/reservation",
                method: "GET",
                success: (response) => {
                    console.log("res:", response.data);
                    if(response.data.length > 0){
                        for(let index=0; index < response.data.length; index++){
                            let newRow = $("<tr onclick=test()>");
                            let cols = "";
                            cols += '<td>' + response.data[index].id + '</td>';
                            cols += '<td>' + response.data[index].category + '</td>';
                            cols += '<td>' + response.data[index].reserveDate.split('T')[0] + '</td>';
                            cols += '<td>' + response.data[index].reserveTime + '</td>';
                            newRow.append(cols);
                            $("#reserveList .reserveData").append(newRow);
                        }
                    }else if(response.data.length === 0){
                        let newRow = $("<tr onclick=test(1)>");
                        let cols = "";
                        cols += '<td> </td>';
                        cols += '<td> </td>';
                        cols += '<td>ì˜ˆì•½ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td>';
                        cols += '<td> </td>';
                        newRow.append(cols);
                        $("#reserveList .reserveData").append(newRow);
                    }
                }
            })
        })
    </script>
</head>
<body class="is-preload">
<!-- Wrapper -->
<div id="wrapper">
    <!-- Main -->
    <div id="main">
        <div class="inner">
            <!-- Header -->
            <div id="commonHeader"></div>
            <!-- Content -->
            <section>
                <header class="main">
                    <h1>My Page</h1>
                </header>

                <h2 id="content">ë§ˆì´ í˜ì´ì§€</h2>
                <p><b>ë„¤ì¼ ì˜¬ë˜?</b>ë¥¼ ì´ìš©í•´ ì£¼ì‹œëŠ” ê³ ê°ë‹˜ë“¤ì˜ ë§ˆì´ í˜ì´ì§€ ì…ë‹ˆë‹¤. <br/>
                    ì ë¦½ê¸ˆ, ì˜ˆì•½ í˜„í™©ì„ ì¡°íšŒ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!ğŸŒ¹</p>
                <hr class="major" />

                <div class="row">
                    <div class="col-12 col-12-small">
                        <h4>ì ë¦½ê¸ˆ í˜„í™©</h4>
                        <ul>
                            <li>ì”ì—¬ ì ë¦½ê¸ˆ: <b>0ì›</b></li>
                            <li>ì ë¦½ê¸ˆ ì‚¬ìš© í˜„í™©</li>
                        </ul>

                        <table id="balanceList">
                            <thead>
                            <tr>
                                <th>ìˆœì„œ</th>
                                <th>ì‹œìˆ </th>
                                <th>ì˜ˆì•½ì¼</th>
                                <th>ì‚¬ìš© ì ë¦½ê¸ˆ</th>
                                <th>ì”ì—¬ ì ë¦½ê¸ˆ</th>
                            </tr>
                            </thead>
                            <tbody class="balanceData">
                            </tbody>
                        </table>

                        <h4>ì˜ˆì•½ í˜„í™©</h4>
                        <table id="reserveList">
                            <thead>
                            <tr>
                                <th>ìˆœì„œ</th>
                                <th>ì‹œìˆ </th>
                                <th>ì˜ˆì•½ì¼</th>
                                <th>ì˜ˆì•½ ì‹œê°„</th>
                            </tr>
                            </thead>
                            <tbody class="reserveData">
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <!-- Menu -->
    <div id="menu"></div>
</div>

<!-- Scripts -->
<script src="javascripts/jquery.min.js"></script>
<script src="javascripts/browser.min.js"></script>
<script src="javascripts/breakpoints.min.js"></script>
<script src="javascripts/util.js"></script>
<script src="javascripts/main.js"></script>

</body>
</html>