<!DOCTYPE HTML>
<html>
<head>
    <title>ë„¤ì¼ ì˜¬ë˜?</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="../stylesheets/main.css" />
    <link rel="shortcut icon" href="../images/nailollae.png"/>
    <!-- menu ë¶ˆëŸ¬ì˜¤ê¸°-->
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#menu").load("/common/menu");
        })

        $(document).ready(function () {
            $("#commonHeader").load("/common/header");
        })
    </script>
</head>

<script>
    function checkModify() {
        // TODO ë¡œê·¸ì¸ ì²´í¬
        if(window.confirm("ê²Œì‹œê¸€ì„ ìˆ˜ì • í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
            $.ajax({
                url: "review/write",
                type: 'POST',
                dataType: 'json'
            })
        }else{
            // TODO ê²Œì‹œê¸€ ì €ì¥ í•˜ì§€ ì•Šê³  ë¦¬ìŠ¤íŠ¸ë¡œ ì´ë™
            window.location.href="/review/list"
        }
    }

    // DB ë‚´ìš© ì¡°íšŒ
    $(document).ready(() => {
        $.ajax({
            url: "http://localhost:3000/review/test/id",
            method: "GET",
            success: (response) => {
                console.log("res:", response.data[0]);
                let likeBtn = "";
                let messageText = "";
                let dateText = "";
                let nameText = "";

                let date = response.data[0].date.split('T')[0];
                let name = response.data[0].name;
                let like = response.data[0].like;
                let message = response.data[0].message;

                dateText += '<input type="text" value="[ì‘ì„±ì¼] ' + date + ' ">';
                nameText += '<input type="text" value="[ì‘ì„±ì] ' + name + ' ">';
                likeBtn += '<input type="button" value="â¤ï¸ ì¢‹ì•„ìš”: ' + like + ' ê°œ" onclick="addLike(1)">';
                messageText += '<textarea name="message" class="message" rows="6">' + message + '</textarea>';

                $(".date").append(dateText);
                $(".name").append(nameText);
                $(".message").append(messageText);
                $(".like").append(likeBtn);
            }
        })
    })

    // TODO ì¢‹ì•„ìš” ê¸°ëŠ¥ ì¶”ê°€
    function addLike(like) {
        console.log("like:", like);
        like++;
        return like;
    }
</script>

<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">
    <!-- Main -->
    <div id="main">
        <div class="inner">
            <!-- Header -->
            <div id="commonHeader"></div>
            <!-- Content -->
            <section>
                <header class="main">
                    <h1>Review</h1>
                </header>

                <!-- Content -->
                <h2 id="content">í›„ê¸°</h2>
                <p><b>ë„¤ì¼ì˜¬ë˜?</b>ë¥¼ ë°©ë¬¸í•´ ì£¼ì‹  ê³ ê°ë‹˜ë“¤ì˜ ì†Œì¤‘í•œ í›„ê¸° ì…ë‹ˆë‹¤. <br/>
                    <u>ì¢‹ì•„ìš”ì™€ ëŒ“ê¸€</u>ì´ ë§ì€ í›„ê¸°ë¥¼ ì‘ì„±í•´ ì£¼ì‹œë©´, ì´ë‹¬ì˜ í›„ê¸°ë¥¼ ì„ ì •í•˜ì—¬ ì†Œì •ì˜ ì ë¦½ê¸ˆì„ ì„ ë¬¼ë¡œ ë“œë¦½ë‹ˆë‹¤!ğŸ</p>
                <hr class="major" />

                <!-- Elements -->
                <div class="row gtr-200">
                    <div class="col-12 col-12-medium">

                        <!-- Form -->
                        <h3>Form</h3>
                        <form method="post" action="#">
                            <div class="row gtr-uniform">
                                <div class="col-6 col-12-xsmall">
                                    <!--ì‘ì„± ë‚ ì§œ-->
                                    <div class="date"></div>
                                </div>
                                <div class="col-6 col-12-xsmall">
                                    <!--ì‘ì„±ì-->
                                    <div class="name"></div>
                                </div>

                                <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
                                <div class="col-12">
                                    <select name="demo-category" id="category">
                                        <option value="">- Category -</option>
                                        <option value="1">ì´ë‹¬ì˜ ì•„íŠ¸</option>
                                        <option value="2">ì ¤ë„¤ì¼</option>
                                        <option value="3">ì ¤ íŒ¨ë””</option>
                                        <option value="4">ì†ëˆˆì¹ ì—°ì¥</option>
                                        <option value="5">ê¸°íƒ€</option>
                                    </select>
                                </div>

                                <!-- í‰ì  -->
                                <div class="col-4 col-12-small">
                                    <input type="radio" id="demo-priority-low" name="demo-priority" checked>
                                    <label for="demo-priority-low">â­</label>
                                </div>
                                <div class="col-4 col-12-small">
                                    <input type="radio" id="demo-priority-normal" name="demo-priority">
                                    <label for="demo-priority-normal">â­â­â­</label>
                                </div>
                                <div class="col-4 col-12-small">
                                    <input type="radio" id="demo-priority-high" name="demo-priority">
                                    <label for="demo-priority-high">â­â­â­â­â­</label>
                                </div>

                                <div class="col-12">
                                    <textarea name="picture" id="picture" placeholder="í›„ê¸° ì‚¬ì§„" rows="6"></textarea>
                                </div>

                                <!-- Break -->
                                <div class="col-12">
                                    <div type="textarea" class="message"></div>
                                </div>
                                <!-- Break -->
                                <div class="col-12">
                                    <ul class="actions">
                                        <!--ì¢‹ì•„ìš” ë²„íŠ¼-->
                                        <div type="button" class="like"></div>
                                        <li><input type="submit" value="Modify" onclick="checkModify()" class="primary" style="float: right"/></li>
                                        <li><input type="reset" value="List" onclick="location.href='/review/list'"/></li>
                                    </ul>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <!-- Menu -->
    <div id="menu"></div>
</div>

<!-- Scripts -->
<script src="../javascripts/jquery.min.js"></script>
<script src="../javascripts/browser.min.js"></script>
<script src="../javascripts/breakpoints.min.js"></script>
<script src="../javascripts/util.js"></script>
<script src="../javascripts/main.js"></script>

</body>
</html>