<!DOCTYPE HTML>
<html>
<head>
    <title>네일 올래?</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="../stylesheets/main.css" />
    <link rel="shortcut icon" href="../images/nailollae.png"/>
    <!-- menu 불러오기-->
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#menu").load("/common/menu");
        })

        $(document).ready(function () {
            $("#commonHeader").load("/common/header");
        })
    </script>
</head>

<script>
    function checkModify() {
        // TODO 로그인 체크
        if(window.confirm("게시글을 수정 하시겠습니까?")){
            $.ajax({
                url: "review/write",
                type: 'POST',
                dataType: 'json'
            })
        }else{
            // TODO 게시글 저장 하지 않고 리스트로 이동
            window.location.href="/review/list"
        }
    }

    // 적립금 현황
    $(document).ready(() => {
        $.ajax({
            url: "http://localhost:3000/review/test/id",
            method: "GET",
            success: (response) => {
                console.log("res:", response.data[0]);
                if(response.data.length > 0){
                    let cols = "";
                    /*let name = response.date[0].name;
                    let message = response.date[0].message;*/
                    let like = response.data[0].like;
                    /*console.log("name:", name, message);

                    cols += '<input type="text" name="date" id="date" value=" '+ date +'" />';
                    cols += '<input type="text" value="' + name + ' ">';*/
                   /* cols += '<textarea value="' + message + '" rows="6">';*/
                    cols += '<input type="button" value="❤️ 좋아요: ' + like + ' 개" onclick="addLike(1)">';
                    console.log(cols);
                    $(".message").append(cols);
                    $(".like").append(cols);
                }
            }
        })
    })

    // TODO 좋아요 기능 추가
    function addLike(like) {
        console.log("like:", like);
        like++;
        return like;
    }
</script>

<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">
    <!-- Main -->
    <div id="main">
        <div class="inner">
            <!-- Header -->
            <div id="commonHeader"></div>
            <!-- Content -->
            <section>
                <header class="main">
                    <h1>Review</h1>
                </header>

                <!-- Content -->
                <h2 id="content">후기</h2>
                <p><b>네일올래?</b>를 방문해 주신 고객님들의 소중한 후기 입니다. <br/>
                    <u>좋아요와 댓글</u>이 많은 후기를 작성해 주시면, 이달의 후기를 선정하여 소정의 적립금을 선물로 드립니다!🎁</p>
                <hr class="major" />

                <!-- Elements -->
                <div class="row gtr-200">
                    <div class="col-12 col-12-medium">

                        <!-- Form -->
                        <h3>Form</h3>
                        <form method="post" action="#">
                            <div class="row gtr-uniform">
                                <div class="col-6 col-12-xsmall">
                                    <input type="text" name="date" id="date" value="" placeholder="작성 날짜" />
                                </div>
                                <div class="col-6 col-12-xsmall">
                                    <input type="text" name="name" id="name" value="" placeholder="작성자" />
                                </div>

                                <!-- 카테고리 선택 -->
                                <div class="col-12">
                                    <select name="demo-category" id="category">
                                        <option value="">- Category -</option>
                                        <option value="1">이달의 아트</option>
                                        <option value="2">젤네일</option>
                                        <option value="3">젤 패디</option>
                                        <option value="4">속눈썹 연장</option>
                                        <option value="5">기타</option>
                                    </select>
                                </div>
                                <!-- 평점 -->
                                <div class="col-4 col-12-small">
                                    <input type="radio" id="demo-priority-low" name="demo-priority" checked>
                                    <label for="demo-priority-low">⭐</label>
                                </div>
                                <div class="col-4 col-12-small">
                                    <input type="radio" id="demo-priority-normal" name="demo-priority">
                                    <label for="demo-priority-normal">⭐⭐⭐</label>
                                </div>
                                <div class="col-4 col-12-small">
                                    <input type="radio" id="demo-priority-high" name="demo-priority">
                                    <label for="demo-priority-high">⭐⭐⭐⭐⭐</label>
                                </div>

                                <div class="col-12">
                                    <textarea name="picture" id="picture" placeholder="후기 사진" rows="6"></textarea>
                                </div>

                                <!-- Break -->
                                <div class="col-12">
                                    <textarea name="message" class="message"></textarea>
                                </div>
                                <!-- Break -->
                                <div class="col-12">
                                    <ul class="actions">
                                        <!-- TODO 수정 필요 -->
                                        <div type="button" class="like"></div>
                                        <li><input type="submit" value="Modify" onclick="checkModify()" class="primary" style="float: right"/></li>
                                        <li><input type="reset" value="List" onclick="location.href='/review/list'"/></li>
                                    </ul>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <!-- Menu -->
    <div id="menu"></div>
</div>

<!-- Scripts -->
<script src="../javascripts/jquery.min.js"></script>
<script src="../javascripts/browser.min.js"></script>
<script src="../javascripts/breakpoints.min.js"></script>
<script src="../javascripts/util.js"></script>
<script src="../javascripts/main.js"></script>

</body>
</html>