<!DOCTYPE HTML>
<html>
<head>
    <title>ë„¤ì¼ ì˜¬ë˜?</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="../stylesheets/main.css" />
    <link rel="shortcut icon" href="../images/nailollae.png"/>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <!-- menu ë¶ˆëŸ¬ì˜¤ê¸°-->
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#menu").load("/common/menu");
        })

        $(document).ready(function () {
            $("#commonHeader").load("/common/header");
        })

        // Table ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        $(document).ready(() => {
            $.ajax({
                url: "http://localhost:3000/review/list/data",
                method: "GET",
                success: (response) => {
                    console.log("res:", response.data.length);
                    if(response.data.length > 0){
                        for(let index=0; index < response.data.length; index++){
                            let newRow = $("<tr>");
                            let cols = "";
                            cols += '<td>' + response.data[index].id + '</td>';
                            cols += '<td>' + response.data[index].title + '</td>';
                            cols += '<td>' + response.data[index].name + '</td>';
                            cols += '<td>' + response.data[index].date.split('T')[0] + '</td>';
                            newRow.append(cols);
                            $("#reviewList .tbody").append(newRow);


                            $("#reviewList tr").click(function () {
                                let tdArr = new Array();
                                let tr = $(this);
                                let td = tr.children();

                                td.each(function (i) {
                                    tdArr.push(td.eq(i).text());
                                })
                                console.log("id:", tdArr[0]);
                                let rowId = tdArr[0];

                                window.location.href="http://localhost:3000/review/view/id=" + rowId;
                            })
                        }
                    }else if(response.data.length === 0){
                        let newRow = $("<tr>");
                        let cols = "";
                        cols += '<td> </td>';
                        cols += '<td> </td>';
                        cols += '<td>ë“±ë¡ëœ í›„ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>';
                        cols += '<td> </td>';
                        newRow.append(cols);
                        $("#reviewList .tbody").append(newRow);
                    }
                }
            })
        })
    </script>
</head>

<body class="is-preload">
<!-- Wrapper -->
<div id="wrapper">
    <!-- Main -->
    <div id="main">
        <div class="inner">
            <!-- Header -->
            <div id="commonHeader"></div>

            <!-- Content -->
            <section>
                <header class="main">
                    <h1>Review</h1>
                </header>

                <!-- Content -->
                <h2 id="content">í›„ê¸° ì‘ì„±</h2>
                <p><b>ë„¤ì¼ì˜¬ë˜?</b>ë¥¼ ë°©ë¬¸í•´ ì£¼ì‹  ê³ ê°ë‹˜ë“¤ì˜ ì†Œì¤‘í•œ í›„ê¸°ë¥¼ ì‘ì„±í•´ ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. <br/>
                    <u>ì¢‹ì•„ìš”ì™€ ëŒ“ê¸€</u>ì´ ë§ì€ í›„ê¸°ë¥¼ ì‘ì„±í•´ ì£¼ì‹œë©´, ì´ë‹¬ì˜ í›„ê¸°ë¥¼ ì„ ì •í•˜ì—¬ ì†Œì •ì˜ ì ë¦½ê¸ˆì„ ì„ ë¬¼ë¡œ ë“œë¦½ë‹ˆë‹¤!ğŸ</p>
                <hr class="major" />
                <a href="/review/write" class="button primary" style="float: right">ì‘ì„±í•˜ê¸°</a>

                <br/><br/><br/>

                <!-- Elements -->
                <div class="row gtr-200">
                    <div class="col-12 col-12-medium">
                        <!-- Table -->
                        <h4>Review</h4>
                        <div class="table-wrapper">
                            <table id="reviewList">
                                <thead>
                                <tr>
                                    <th>ìˆœì„œ</th>
                                    <th>ì œëª©</th>
                                    <th>ì‘ì„±ì</th>
                                    <th>ì‘ì„±ì¼</th>
                                </tr>
                                </thead>
                                <tbody class="tbody" id="tbody">
                                </tbody>
                            </table>
                        </div>

                        <!-- TODO í˜ì´ì§• ì²˜ë¦¬ í•„ìš” -->
                        <ul class="pagination">
                            <li><span class="button disabled">Prev</span></li>
                            <li><a href="#" class="page active">1</a></li>
                            <li><a href="#" class="page">2</a></li>
                            <li><a href="#" class="page">3</a></li>
                            <li><span>&hellip;</span></li>
                            <li><a href="#" class="page">8</a></li>
                            <li><a href="#" class="page">9</a></li>
                            <li><a href="#" class="page">10</a></li>
                            <li><a href="#" class="button">Next</a></li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <!-- Menu -->
    <div id="menu"></div>
</div>

<!-- Scripts -->
<script src="../javascripts/jquery.min.js"></script>
<script src="../javascripts/browser.min.js"></script>
<script src="../javascripts/breakpoints.min.js"></script>
<script src="../javascripts/util.js"></script>
<script src="../javascripts/main.js"></script>

</body>
</html>