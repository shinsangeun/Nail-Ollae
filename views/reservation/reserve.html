<!DOCTYPE HTML>
<html>
<head>
    <title>ë„¤ì¼ ì˜¬ë˜?</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="../stylesheets/main.css"/>
    <link rel="shortcut icon" href="../images/nailollae.png"/>
    <!-- menu ë¶ˆëŸ¬ì˜¤ê¸°-->
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#menu").load("/common/menu");
        })
    </script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script type="text/javascript">
        $.noConflict();
        jQuery(document).ready(function ($) {
            $("#datepicker").datepicker({
                inline: true,
                showOtherMonths: true,
                showMonthAfterYear: true,
                monthNames: ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'],
                dayNamesMin: ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '],
                dateFormat: "yy-mm-dd"
            });

            $('#datepicker').change(function () {
                let date = $('#datepicker').val();
                let pageUrl = window.location.pathname;
                console.log("date:", date, pageUrl);

                if (date !== null) {
                    window.location.replace(pageUrl + "?date=" + date);
                    console.log("date:", date, pageUrl);
                }
            });

            $('#time').change(function () {
                let time = $('#time').val();
                let pageUrl = window.location;
                console.log("time:", time, pageUrl);

                if (time !== null) {
                    window.location.replace(pageUrl + "&time=" + time);
                    console.log("time:", time, pageUrl);
                }
            });

            $('#category').change(function () {
                let category = $('#category').val();
                let pageUrl = window.location;
                console.log("category:", category, pageUrl);

                if (category !== null) {
                    window.location.replace(pageUrl + "&category=" + category);
                    console.log("category:", category, pageUrl);
                }
            });
        })
        // ì˜ˆì•½í•˜ê¸° ë²„íŠ¼
        checkReserve = () => {
            let pageUrl = window.location.search;

            let date = pageUrl.split('=')[1];
            date = date.split('&')[0];

            let time = pageUrl.split('&')[1];
            time = time.split('=')[1];

            let category = pageUrl.split('&')[2];
            category = category.split('=')[1];

            alert("âœ… ë‚ ì§œ: " + date + "\nâœ… ì‹œê°„: " + time + "ì‹œ" + "\nâœ… ì‹œìˆ  ë‚´ìš©: " + decodeURI(category) + "\nì˜ˆì•½ì„ ì§„í–‰ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");

            //reservation í…Œì´ë¸”ì— ì €ì¥
            $(document).ready(() => {
                $.ajax({
                    url: "reservation/save",
                    method: "POST",
                    data: {
                        name: 'test',
                        date: date,
                        time: time,
                        category: category
                    }
                })
            });
        }

        //ì˜ˆì•½ Table
        jQuery(document).ready(function () {
            $('#reserve').find('td').each(function (i, el) {
                let inputEl = $(el).children().get(0);
                console.log("inputEl:", inputEl, $(inputEl).attr('id'));
                $(el).before();
            })
        });
    </script>
</head>
<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">

    <!-- Main -->
    <div id="main">
        <div class="inner">

            <!-- Header -->
            <header id="header">
                <a href="/" class="logo"><strong>Nail</strong> Ollae?</a>
                <ul class="icons">
                    <li><a href="https://www.instagram.com/ssang_eunii/" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
                </ul>
            </header>

            <!-- Content -->
            <section>
                <header class="main">
                    <h1>Reservation</h1>
                </header>

                <!-- Content -->
                <h2 id="content">ë„¤ì¼ ì˜ˆì•½</h2>
                <p><b>ë„¤ì¼ì˜¬ë˜?</b>ë¥¼ ë°©ë¬¸í•´ ì£¼ì‹  ê³ ê°ë‹˜ë“¤ì˜ ì˜ˆì•½ í˜ì´ì§€ ì…ë‹ˆë‹¤. <br/>
                    ë‚ ì§œ ì„ íƒ í›„, ì›í•˜ì‹œëŠ” ì‹œê°„ëŒ€ì— ì˜ˆì•½ í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤!ğŸ§¸</p>
                <hr class="major"/>

                <!-- Elements -->
                <form method="post">
                <div class="row gtr-200">
                    <div class="col-12 col-12-medium">
                        <!-- Table -->
                        <h4>Reservation</h4>
                        <div class="table-wrapper">
                            <table id="reserve">
                                <thead>
                                <tr>
                                    <th>ë‚ ì§œ</th>
                                    <th>ì‹œê°„</th>
                                    <th>ì‹œìˆ </th>
                                    <th>ì˜ˆì•½</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>
                                        <input type="text" id="datepicker" placeholder="ë‚ ì§œë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”">
                                    </td>
                                    <td>
                                        <select name="time" id="time">
                                            <option value="">- ì‹œê°„ ì„ íƒ -</option>
                                            <option value="10">10:00</option>
                                            <option value="11">11:00</option>
                                            <option value="12">12:00</option>
                                            <option value="13">13:00</option>
                                            <option value="14">14:00</option>
                                            <option value="15">15:00</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="category" id="category">
                                            <option value="">- ì‹œìˆ  ì„ íƒ -</option>
                                            <option value="ì´ë‹¬ì˜ì•„íŠ¸">ì´ë‹¬ì˜ ì•„íŠ¸</option>
                                            <option value="ì ¤ë„¤ì¼">ì ¤ë„¤ì¼</option>
                                            <option value="ì ¤íŒ¨ë””">ì ¤íŒ¨ë””</option>
                                            <option value="ì†ëˆˆì¹ì—°ì¥">ì†ëˆˆì¹ ì—°ì¥</option>
                                        </select>
                                    </td>
                                    <td>
                                        <button id="btnReserve" onclick="checkReserve()">ì˜ˆì•½ í•˜ê¸°</button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                </form>
            </section>
        </div>
    </div>
    <!-- Menu -->
    <div id="menu"></div>
</div>

<!-- Scripts -->
<script src="../javascripts/jquery.min.js"></script>
<script src="../javascripts/browser.min.js"></script>
<script src="../javascripts/breakpoints.min.js"></script>
<script src="../javascripts/util.js"></script>
<script src="../javascripts/main.js"></script>

</body>
</html>